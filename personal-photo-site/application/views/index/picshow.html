<!doctype html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>图片Show</title>
    <link rel="stylesheet" href="assets/css/normalize.css">
    <link rel="stylesheet" type="text/css" href="assets/css/default.css">
    <style type="text/css">
        #gallery-wrapper {
            position: relative;
            max-width: 75%;
            width: 75%;
            margin: 50px auto;
        }
        
        img.thumb {
            width: 100%;
            max-width: 100%;
            height: auto;
        }
        
        .white-panel {
            position: absolute;
            background: white;
            border-radius: 5px;
            box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.3);
            padding: 10px;
        }
        
        .white-panel h1 {
            font-size: 1em;
        }
        
        .white-panel h1 a {
            color: #A92733;
        }
        
        .white-panel:hover {
            box-shadow: 1px 1px 10px rgba(0, 0, 0, 0.5);
            margin-top: -5px;
            -webkit-transition: all 0.3s ease-in-out;
            -moz-transition: all 0.3s ease-in-out;
            -o-transition: all 0.3s ease-in-out;
            transition: all 0.3s ease-in-out;
        }
    </style>
    <!--[if IE]>
    <script src="http://libs.useso.com/js/html5shiv/3.7/html5shiv.min.js"></script>
    <![endif]-->
</head>

<body>
    <section class="htmleaf-container">
        <header class="htmleaf-header">
            <h1>Bug图片站</h1>
            <!--<div class="htmleaf-links">-->
            <a class="htmleaf-icon icon-htmleaf-home-outline contorliconsize" href="/" title="回到主页"><span> 回到主页</span></a>
            <!--<a class="htmleaf-icon icon-htmleaf-arrow-forward-outline" href="" title="" target="_blank"><span> </span></a>-->
            <!--</div>-->
        </header>
    </section>
    <section id="gallery-wrapper">
        <article class="white-panel">
            <a href="#" class="toimages"><img src="" class="thumb"></a>
            <!--<h1><a href="#">Title 1</a></h1>
            <p>Description 1</p>-->
        </article>
        <article class="white-panel">
            <a href="#" class="toimages"><img src="" class="thumb"></a>
            <!--<h1><a href="#">Title 2</a></h1>
            <p>Description 2</p>-->
        </article>
        <article class="white-panel">
            <a href="#" class="toimages"><img src="" class="thumb"></a>
            <!--<h1><a href="#">Title 3</a></h1>
            <p>Description 3</p>-->
        </article>
        <article class="white-panel">
            <a href="#" class="toimages"><img src="" class="thumb"></a>
            <!--<h1><a href="#">Title 4</a></h1>
            <p>Description 4</p>-->
        </article>
        <article class="white-panel">
            <a href="#" class="toimages"><img src="" class="thumb"></a>
            <!--<h1><a href="#">Title 5</a></h1>
            <p>Description 5</p>-->
        </article>
        <article class="white-panel">
            <a href="#" class="toimages"><img src="" class="thumb"></a>
            <!--<h1><a href="#">Title 6</a></h1>
            <p>Description 6</p>-->
        </article>
        <article class="white-panel">
            <a href="#" class="toimages"><img src="" class="thumb"></a>
            <!--<h1><a href="#">Title 7</a></h1>
            <p>Description 7</p>-->
        </article>
        <article class="white-panel">
            <a href="#" class="toimages"><img src="" class="thumb"></a>
            <!--<h1><a href="#">Title 8</a></h1>
            <p>Description 8</p>-->
        </article>
        <article class="white-panel">
            <a href="#" class="toimages"><img src="" class="thumb"></a>
            <!--<h1><a href="#">Title 9</a></h1>
            <p>Description 9</p>-->
        </article>
        <article class="white-panel">
            <a href="#" class="toimages"><img src="" class="thumb"></a>
            <!--<h1><a href="#">Title 10</a></h1>
            <p>Description 10</p>-->
        </article>
        <article class="white-panel">
            <a href="#" class="toimages"><img src="" class="thumb"></a>
            <!--<h1><a href="#">Title 11</a></h1>
            <p>Description 11</p>-->
        </article>
        <article class="white-panel">
            <a href="#" class="toimages"><img src="" class="thumb"></a>
            <!--<h1><a href="#">Title 12</a></h1>
            <p>Description 12</p>-->
        </article>
        <article class="white-panel">
            <a href="#" class="toimages"><img src="" class="thumb"></a>
            <!--<h1><a href="#">Title 13</a></h1>
            <p>Description 13</p>-->
        </article>
        <article class="white-panel">
            <a href="#" class="toimages"><img src="" class="thumb"></a>
            <!--<h1><a href="#">Title 14</a></h1>
            <p>Description 14</p>-->
        </article>
        <article class="white-panel">
            <a href="#" class="toimages"><img src="" class="thumb"></a>
            <!--<h1><a href="#">Title 15</a></h1>
            <p>Description 15</p>-->
        </article>
        <article class="white-panel">
            <a href="#" class="toimages"><img src="" class="thumb"></a>
            <!--<h1><a href="#">Title 16</a></h1>
            <p>Description 16</p>-->
        </article>
    </section>



    <script src="http://libs.useso.com/js/jquery/1.11.0/jquery.min.js" type="text/javascript"></script>
    <script>
        window.jQuery || document.write('<script src="assets/js/jquery-1.11.0.min.js"><\/script>')
    </script>
    <script src="assets/js/pinterest_grid.js"></script>
    <script type="text/javascript">
        $(function() {
            $("#gallery-wrapper").pinterest_grid({
                no_columns: 4,
                padding_x: 10,
                padding_y: 10,
                margin_bottom: 50,
                single_column_breakpoint: 700,
            });

        });
    </script>
    <!--加载默认图片-->
    <script type="text/javascript">
        $(document).ready(function() {
            $.ajax({
                url: "http://www.xgssy.cn/uploadpicshow/post",
                type: "POST",
                success: function(data) {
                    var datajson = JSON.parse(data);
                    // console.log(datajson + 'haha');
                    for (i = 0; i < datajson.length; i++) {
                        var b = i + 1;
                        $('#gallery-wrapper .white-panel img').eq(i).attr('src', 'uploads/picshowindex/' + datajson[i].filename)
                        $('#gallery-wrapper .white-panel a.toimages').eq(i).attr('href', 'images/' + datajson[i].imgtypemark)
                    }
                },
                error: function() {
                    console.log('出错');
                }
            });
        });
    </script>
    <!--滚动加载-->
    <script type="text/javascript">
        $(document).ready(function() {
            var b = 0;
            $(window).scroll(function() {
                if (($(window).scrollTop() + $(window).height()) == $(document).height()) {
                    b++;
                    $.ajax({
                        url: "http://www.xgssy.cn/uploadpicshow/scrollpost",
                        type: "POST",
                        data: {
                            skip: b * 16
                        },
                        success: function(result) {

                            var datajson = JSON.parse(result);
                            // console.log(datajson + 'bbb');
                            //   console.log(datajson[i].filename + 'haha');
                            for (i = 0; i < datajson.length; i++) {
                                var content = content + "<article class='white-panel'><a href='images/" + datajson[i].imgtypemark +
                                    "'><img src='uploads/picshowindex/" + datajson[i].filename + "' class='thumb'></a>  </article>"
                            }
                            $('#gallery-wrapper .white-panel').eq(15 * b + (b * 1 - 1)).after(content);
                        },
                        error: function() {
                            console.log('出错');
                        }
                    });
                }
            });
        });
    </script>
</body>

</html>